---
 - name: Import Secret Vars
   include_vars: "{{ item }}"
   with_items:
    - "secret.yml"

 - name: Install PHP on centos7
   yum:
    name: "{{ php_package_url }}"
    state: present
   when: ansible_distribution_major_version == '7'

 - name: Install PHP on centos6
   yum:
    name: "{{ php6_package_url }}"
    state: present
   when: ansible_distribution_major_version == '6'

 - block:
    - debug:
       msg: Git PHP Conf
    - file: 
       path: "{{ php_install_dir }}/etc"
       state: absent
    - git: 
       repo: "{{ php_conf_url }}"
       dest: "{{ php_install_dir }}/etc"
       clone: yes

 - name: Generate Logs Directory
   file:
    path: "{{ php_logs_dir }}"
    owner: "{{ php_user }}"
    group: "{{ php_user }}"
    recurse: yes
    state: directory

 - name: Start Daemon When System Boot
   shell: echo "{{ php_install_dir }}/sbin/php-fpm" >> /etc/rc.local       

 - name: Set Environment PATH
   shell: echo "export PATH={{ php_install_dir }}/bin:\$PATH" >> /etc/.bash_profile

...
