---
 - name: Set CentOS 7 Timezone
   shell: timedatectl set-timezone Asia/Shanghai
   when: ansible_distribution_major_version == '7'

 - name: Set CentOS 6 Timezone
   copy: 
    src: timezone.Shanghai 
    dest: /etc/localtime
   when: ansible_distribution_major_version != '7'

 - name: Close Ntpd Service
   service:
    name: ntpd
    state: stopped
    enabled: no

 - name: Sync Datetime Crontab
   cron: 
    name: "Sync Datetime" 
    state: present  
    hour: 2 
    minute: 15  
    user: root 
    job: "/usr/sbin/ntpdate 0.centos.pool.ntp.org 1.centos.pool.ntp.org 2.centos.pool.ntp.org 3.centos.pool.ntp.org > /dev/null 2>&1;/usr/sbin/hwclock -w > /dev/null 2>&1"

 - name: Sync Datetime
   shell: /usr/sbin/ntpdate 0.centos.pool.ntp.org 1.centos.pool.ntp.org 2.centos.pool.ntp.org 3.centos.pool.ntp.org && /usr/sbin/hwclock -w
   ignore_errors: True
...
